=== Open User Map | Everybody can add locations ===
Contributors: 100plugins
Tags: map, interactive map, leaflet map, leaflet
Requires at least: 4.6
Tested up to: 6.1
Requires PHP: 5.6
Stable tag: 1.3.0
License: GPLv3
License URI: http://www.gnu.org/licenses/gpl-3.0.html

Let your visitors add markers to an interactive map (without registration). New locations will wait for your approval before getting published. The map is based on Leaflet.js (no API keys - it's free!).

== Description ==

Let your visitors add markers to an interactive map (without registration). New locations will wait for your approval before getting published. The map is based on [Leaflet Map JS](https://leafletjs.com/?target=_blank) and offers you many free map and marker styles. You do not need an API Key, Access Token or any other external registration (like Google). There are no API request limits. 

[Demo Map](https://www.open-user-map.com/demo/?target=_blank) | [Start 7-day PRO trial (no credit card required)](https://checkout.freemius.com/mode/dialog/plugin/9083/plan/16065/?trial=free&target=_blank) | [More Info](https://www.open-user-map.com/?target=_blank)

= 👩🏾‍🚀🤵👩🏻‍🎤👩🏽‍🌾👩🏿‍💻 Grow your community! =

Adding locations is as simple as dropping a marker on a map. Your visitors can **search for addresses** worldwide to quickly find the right spots. You can add **custom fields** and descriptions to the form to collect the data you need. Image and audio uploads are possible and much more. Let your users collaborate!

= More than 60 options to customize =
Use the **Gutenberg Block** or **Elementor Widget** to integrate your map or place the shortcode anywhere on your site. Close by locations will group together in clusters. Make use of Custom Fields to create the form accoding to your needs.

= How to add a new marker: =
Just by clicking a "+"-Button a form will popup to let the visitor enter location details the same comfortable way you can do it in the backend. After submit the location proposal will be "pending" and wait for your review approval to get published.

https://www.youtube.com/watch?v=kvIBY48yNgA

= Free Features: =
- frontend adding (can be disabled)
- admin approval for pending locations
- based on Leaflet
- no API Keys
- multiple map styles
- multiple marker styles
- full width map size
- keep map focus in fixed position (stay in an area)
- locations with custom fields! 🥳
- private custom fields
- conditional fields (🪄 experimental, please see Help section)
- "address", "description", "image", "audio" and even "title" fields can be disabled
- "address"-field links to google route
- every text bit can be customized
- locations with images & audio
- Shortcode with with custom settings
- Gutenberg Block with custom settings
- Elementor Widget with custom settings
- marker clustering
- fullscreen option
- address search
- refresh, redirection or thank you message after submit
- use URL-Parameter &markerid=123 to highlight a specific marker on the map
- get a specific value from a location by using the PHP function oum_get_location_value( 'YOUR VALUE', $post_id )

=== 🚀 PRO ===
The Open User Map plugin is also available in a professional version which includes more styles, more funtionality and more flexibility!

- **More custom field types**
Add custom fields like links, radio buttons, checkboxes, dropdowns and even HTML. Social media links will automatically be rendered as icons.

- **Export & Import locations**
Maybe you already have a list of places you need to show on the map. No problem - just make use of the CSV Export & Import feature. This also comes in handy for bulk editing a lot of locations.

- **Email user notification**
Users get notified by email after their location has been approved.

- **Email Admin notification**
Send notifications to an Admin email account on incoming location proposals.

- **User restriction**
Restrict "Add location" feature to registered users only. Redirect your visitors to the registration form.

- **Auto-publish**
When activated registered users will publish directly without admin approval. This can also be enabled for unregistered users.

- **Extend user registration**
Integrate the "Add location" feature to the WordPress user registration form.

- **Custom filesizes**
Customize max. filesize for image/audio uploads (default: 10MB).

- **Custom marker icons**
Use your own custom marker icon.

- **Custom UI Elements color**
Pick a color for buttons and icons that fits your theme.

- **Current location**
Add a button that relocates the map to the users current location.

- **Filterable Marker Categories**
Organize locations in multiple filterable marker groups. Each group (category) can have an individual marker icon and will be accessible to visitors.

- **Limit visible locations**
You can limit the locations to be shown by marker categories and by post ids. So it is possible to show only locations of a specific type or to render only one single location. This can be done in the block settings or with shortcode attributes.

- **Single pages for locations**
Per default locations will not have a single page. This should ensure that all the locations wont negatively affect your SEO. But if you'd like to add more content to locations you can easily enable it in the PRO version.

- **Shortcodes for single location values**
Use the shortcode [open-user-map-location value="YOUR VALUE" post_id="POST ID (optional)"] to easily display a value from a location. You will need this when creating single pages for locations. See all the available values in the Help section of the plugin settings (Settings > Open User Map > Help).

- **Show all location images as gallery**
Use the shortcode [open-user-map-gallery] to get a nice gallery view of all the location images. Each image is linked to the location marker on the map.

- **Allow registered users to edit their locations**
Open User Map PRO extends WordPress capabilities to allow backend access. If assigned to the user role registered users get access to read, edit and delete their locations from within the backend.

- **Submit your feature requests (high priority!)**
[Suggest features](https://www.open-user-map.com/) that you want to have and we will target these with high priority.

[Get a 7-day PRO trial (no credit card)](https://checkout.freemius.com/mode/dialog/plugin/9083/plan/16065/?trial=free&target=_blank)

=== Use Cases ===

= 🍕 Bar and restaurant guide =
You want to build a collaborative map service where your visitors can add locations on their own. This could be a travel blog or a something like a bar and restaurtant guide. Where are the top locations for food and drinks in your city? Ask your audience for their recommendations! Prepare some categories like food, drinks, music etc. and let them drop the markers right in the frontend. Watch your map grow fast!

= 👭👬 Community building =
Extend the WordPress user registration form with an "Add location" input. Your new users can drop a marker on the map to share their location. Use it to build an awesome user map and help your audience connecting.

= 🎤🎸 Sound map =
Get your audience a soundmap. Your visitors can not only upload text and images to their locations but audio as well! This way e.g urban (or remote) areas can be discovered by its specific soundscape.

**The possibilities are endless. We are very curious about what you are building with the help of our plugin. Please don't hesitate to let us know or ask for feature requests in the support forum. As this plugin is under constant development we are keen to know what are the features that you need? Contact us!**

== Installation ==
From your WordPress dashboard

1. Visit Plugins > Add New
2. Search for “Open User Map”
3. Install and activate Open User Map from your Plugins page
4. Use the Gutenberg Block or Elementor Widget "Open User Map" or just use the shortcode `[open-user-map]` to show the map on your site.
5. You can manage locations in the “OUM Locations” menu.
6. You can manage styles and features under "Settings > Open User Map".

== Frequently Asked Questions ==
= Do I need an API Key or some external registration? =
No, the plugin is based on Leaflet.js and offers you free map styles that don’t need any kind of registration.

= How to integrate the map? =
Use the Gutenberg Block or Elementor Widget "Open User Map" or just place the shortcode `[open-user-map]` anywhere in your content or integrate it within your theme template with PHP:

`echo do_shortcode("[open-user-map]")`

you can also override the initial map focus with shortcode attributes:

`[open-user-map lat="51.50665732176545" long="-0.12752251529432854" zoom="13"]`

= Can I set the initial map position individualy? =
If you want to override the initial map focus (settings) just use the shortcode with attributes:

`[open-user-map lat="51.50665732176545" long="-0.12752251529432854" zoom="13"]`

= Can I limit locations to a specific Marker Category only? =
Yes, just add the "types" attribute to the shortcode:

`[open-user-map lat="51.50665732176545" long="-0.12752251529432854" zoom="13" types="food|drinks"]`

= Can I show only specific locations? =
Yes, just add the "ids" attribute to the shortcode:

`[open-user-map lat="51.50665732176545" long="-0.12752251529432854" zoom="13" ids="123"]`

= Do I need GPS coordinates? =
No. Add a new location simply by droping a marker on the map. You can search for addresses as well. If you want to use GPS coordinates though, there is an option for that.

= I want my own fields. Is this possible? =
Yes. You can add custom fields in the settings and use them instead of "address" and "description".

= Can I use Gutenberg? =
Yes! You will find the "Open User Map"-Block under widgets.

= Can I use Elementor? =
Yes! You will find the "Open User Map"-Widget. The minimum required Elementor version is 3.7.0. PHP needs to be at least version 7.3.

= Can I use marker clustering? =
Yes! This is enabled by default. You can disable it in the settings.

= Can I go fullscreen? =
Yes! There is a fullscreen control button on the top left of the map. You can disable it in the settings.

= Can I use custom styles? =
Yes, we encourage you to do so. This plugin is supposed to be developer friendly. Feel free to override the .open-user-map class in css to create your own awesome design.

= Can my users upload audio files? =
Yes! This is a new fun feature. Your visitors can upload mp3, wav, mp4 and m4a files and after your approval little audio players will be attached to the locations. The world needs soundmaps!

= Is there a max. filesize for image/audio uploads? =
Yes, per default it is 10MB. You customize that with the PRO version. Be aware that that you may need to increase **upload_max_filesize** and **post_max_size** on your server accordingly as they set the general limit for uploading files.

= Can I disable specific form fields? =
Yes, all default form fields can be disabled. You can use custom fields.

= Can the "link" field handle multiple URLs? =
Yes. They need to be separated with the | symbol.

= How can I access field values of a location? =
Use this shortcode (PRO)

`[open-user-map-location value="YOUR VALUE" post_id="POST ID (optional)"]` 

to display a value from a location. You will need this when creating single pages for locations. See all the available values in the Help section of the plugin settings (Settings > Open User Map > Help).

= How to allow registered users to manage their locations? =
Make use of these capabilities: 'edit_oum-locations', 'edit_published_oum-locations' and 'delete_oum-locations'. Additionally you need to ensure the user has 'upload_files' capability if you want them to edit/upload images in the backend.
You can assign them to any user role with plugins like e.g. User Role Manager.

= Can I automatically open a location (eg. for sharing)? =
Add ?markerid=123 to the URL to auto-open a specific location. 123 can be the post_id of any public location.

= The map doesn't show up with content preloading. =
Some themes/plugins make use of content preloading. This can break the loading of the OUM map. In this rare case please disable preloading for the map section. Alternatively you could manually trigger the oumMap.invalidateSize() method after the content has been loaded. This reinits the OUM map.

= How can I import/export locations to CSV? =
There is a Import & Export feature available in the PRO version. 

= Can I use condtionial fields? =
Yes, there is an (experimental) feature available. It can be done with a Javascript function. Find more details in the Help section (Settings > Open User Map > Help).

= I want to submit a feature request. =
Please do so! You can use the support forum to let us know about your ideas helping to make this plugin better. 

== Screenshots ==
1. Your map in the frontend
2. Show detail information on every location
3. Maybe try a different map style
4. ...or another one
5. Let your visitors add locations
6. The frontend popup form
7. The users Locations will be pending and wait for your approval
8. Use Marker clustering for locations that are close to each other
9. Edit Screen for Locations
10. Settings Screen
11. Settings Screen
12. Settings Screen
13. Integrate the map with Gutenberg Block Editor
14. X-mas Feature: visitors can upload audio files
15. Add Custom fields instead of "address" and "description"

== Changelog ==

= 1.3.0 =
* Ensure WordPress 6.1 compatibility
* Renaming Menu "Open User Map" to "OUM Locations"
* Add Wizard on initial setup
* Map Size & Height as Block Attributes (Elementor, Gutenberg, Shortcode)
* Bugfix: Catch error when EXIF PHP library is missing
* Feature Request: CSV import/export for locations
* Experimental Feature: Conditional Fields via JS (see Help section)

= 1.2.26 =
* Bugfix: JS comments could break minification (3rd party plugins)
* Bugfix: PHP warning
* Feature: Elementor Widget

= 1.2.25 =
* Bugfix: Disable Audio Uploads doesn't work
* Bugfix: Shortcode in Elementor leads to JS error
* Design optimization for Gutenberg Block (in Editor Mode)
* Add chunked loading for very many markers

= 1.2.24 =
* Rename "Types" to "Marker Catgories"
* Refactor and Rearrange Plugin Settings
* Feature Request: Show location date (optional)
* Feature Request: Relocate Close button & close on backdrop click and on ESC Key
* Feature Request: Dropdown options for Type now correspond to pre-selection
* Bugfix: Fullscreen not working
* Bugfix: PHP notice (undefined index)

= 1.2.23 =
* Ensure overlay compatibility with nested page sections
* FR: Option to allow empty type selection
* Readme Info: How to export locations

= 1.2.22 =
* Bugfix: Get custom field value

= 1.2.21 =
* Feature: Shortcodes for single location values
* Feature: Archive pages (when single page are enabled)
* Freemius SDK update

= 1.2.20 =
* Bugfix: Make map globally available to lazy loading triggers (use oumMap.invalidateSize())
* Bugfix: Shaking map on fixed position
* Bugfix: oum-location post type not showing up in Elementor
* Bugfix: & symbol in title results in &amp;
* Bugfix: `symbol in title or description breaks the code
* Feature Request: address searchbar should be optional
* Add gallery shortcode attributes (url, number)

= 1.2.19 =
* Bugfix: Audio Upload on iPhone

= 1.2.18 =
* Add debug info under Settings > Open User Map > Help
* Feature Request: Allow comments for single pages
* Feature Request: Custom fields should get option to be private
* Feature Request: custom min zoom, custom map bounds
* Feature Request: support m4a audio format
* Feature Request: address search field on map
* Feature Request: shortcode [open-user-map-gallery] to render all images as gallery
* Feature Request: URL-Parameter &markerid=123 to auto-open specific location
* Bugfix: automatic scroll to top of form

= 1.2.17 =
* Bugfix: issues with output buffer
* Bugfix: JS error with disabled audio upload
* Bugfix: wrong image thumbnail
* Feature Request: new setting to collapse filterbox design (on map)
* Feature Request: display full image in the location edit screen

= 1.2.16 =
* Bugfix: Default marker icon
* better on-boarding
* optimized backend style

= 1.2.15 =
* Bugfix: Admin notification failed sometimes
* Bugfix: Error on missing default roles
* Feature Request: Better "Show me where I am"-Icon

= 1.2.14 =
* Bugfix: JS error in the backend (color-picker & custom fields)
* Bugfix: Image uploaded from the backend missing thumbnail
* Bugfix: Missing image rotation for mobile uploads
* Feature Request: All texts are now customizable
* Feature Request: New custom field "HTML"
* Feature Request: New capabilities that allow edit access for registered users
* Feature Request: Remove button for image & audio uploads
* Feature Request: Loading Icon on submit
* Optimized settings layout
* Code optimization

= 1.2.13 =
* Bugfix: php warning (type undefined)
* Feature Request: Allow refresh, redirection or text message after validation
* Feature Request: Notify admin on incoming location proposals
* Feature Request: Redirect "Add Location"-Button to registration form (when restricted to registered users only)
* Feature Request: Allow to limit the number of characters on text fields
* Feature Request: Allow empty option value
* Feature Request: Allow auto-publish for unregistered users

= 1.2.12 =
* Bugfix: Styling of checkboxes
* Bugfix: map paning on 1st click on marker incorrect due to lazy loading image dimensions
* Feature Request: new option to auto-generate title allowing locations without title
* Feature Request: Allow to change the title of the form and the title of the buttons
* Feature Request: limit map to specific location
* Feature Request: limit map to specific type
* Feature Request: adjustable map height (desktop & mobile)
* FEATURE: Customize Gutenberg Block with attributes

= 1.2.11 =
* Security Update
* Bugfix: "notify me on publish" was not translatable
* Feature Request: multiple links (separated with |)
* Feature Request: Add more Social Media Icons
* Feature Request: "Type" can have a custom label

= 1.2.10 =
* "Add location" button can be disabled entirely
* create and use automatic image thumbnails
* Better styling & validation for fieldsets
* hide empty custom fields
* Feature Request: "Full width", "Fixed Size" & "Reponsive size" option
* Feature Request: marker categories filter
* Feature Request: single pages for locations
* Feature Request: automatic Social Media Icons
* Feature Request: dynamic image size

= 1.2.9 =
* better styles for "+"-Button
* better settings overview
* Feature Request: change allowed audio file extensions to 'mp3', 'wav', 'mp4'
* Feature Request: individually disable "audio" and "image" upload
* Feature Request: mark "description", "audio" & "image" as required fields
* Feature Request: custom colors for ui elements
* Feature Request: more custom field types
* Feature Request: description texts for custom fields
* Bugfix: custom fields not showing correctly in the backend
* Bugfix: multiple approval confirmation emails

= 1.2.8 =
* Bugfix: default audio and image upload sizes
* optimized loading of settings
* fixing minor bugs
* ensure WordPress 5.9 compatibility

= 1.2.7 =
* Bugfix: "Address" & "Description" don't hide (thanks @tom29)
* Feature Request: pre-fill address field when geosearch succeeds

= 1.2.6 =
* Feature Request: Custom fields
* Feature Request: "Address" and "Description" fields can be disabled
* Feature Request: Search leads to marker placement

= 1.2.5 =
* PRO: use marker categories with individual marker icons

= 1.2.4 =
* Bugfix: enabling current user location

= 1.2.3 =
* Bugfix: UI settings page

= 1.2.2 =
* PRO: use your own custom marker icon
* PRO: add a button that relocates the map to the users current location (optional)

= 1.2.1 =
* wording

= 1.2.0 =
* major update provides access to PRO version
* better code structure
* limit max. filesize for image/audio uploads to 10MB
* PRO: user email notification after approval (optional)
* PRO: customize max. filesize for image/audio uploads
* PRO: auto-publish for registered users (optional)
* PRO: restrict "Add location" feature to registered users only (optional)
* PRO: add "Add location" feature to WordPress registration (optional)

= 1.1.10 =
* bugfix: dashicons

= 1.1.9 =
* FUN FEATURE: let your visitors upload audio to locations (xmas feature request)
* better frontend form
* code optimization

= 1.1.8 =
* new feature: use shortcode attributes to set initial map focus

= 1.1.7 =
* bugfix: escaping quotes

= 1.1.6 =
* escaping single quotes from HTML input

= 1.1.5 =
* better initial map position when adding new locations
* adding plugin contributers (thanks!)

= 1.1.4 =
* bugfix: fullscreen on ios
* better initial map position when adding another location
* better responsive styles for small screens

= 1.1.3 =
* style fixes

= 1.1.2 =
* style fixes

= 1.1.1 =
* better styling for overlay

= 1.1.0 =
* Add Fullscreen control
* Settings: custom "Thank you"-message
* better opt-in screen

= 1.0.0 =
* basic free features
* media assets & readme